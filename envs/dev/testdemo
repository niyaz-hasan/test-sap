locals {
  glue_jobs = {
    job_1 = {
      name        = "glue-job-1"
      script_path = "s3://scripts/job1.py"
      args        = {
        "--custom_param" = "value1"
        "--env"          = "dev"
      }
    }
    job_2 = {
      name        = "glue-job-2"
      script_path = "s3://scripts/job2.py"
      args        = {
        "--custom_param" = "value2"
        "--env"          = "prod"
      }
    }
    # ... repeat up to job_15
  }
}

######################################################

resource "aws_glue_job" "jobs" {
  for_each = local.glue_jobs

  name     = each.value.name
  role_arn = aws_iam_role.glue_role.arn

  command {
    name            = "glueetl"
    script_location = each.value.script_path
    python_version  = "3"
  }

  default_arguments = merge({
    "--TempDir"              = "s3://your-temp-dir/"
    "--job-language"         = "python"
    "--enable-metrics"       = "true"
    "--enable-continuous-cloudwatch-log" = "true"
  }, each.value.args)

  glue_version       = "4.0"
  number_of_workers  = 10
  worker_type        = "G.1X"

  execution_property {
    max_concurrent_runs = 1
  }

  tags = {
    Owner       = "Niyaz"
    Environment = each.value.args["--env"]
  }
}
#########################################################################
variables.tf 

variable "glue_jobs" {
  description = "Map of Glue job configurations"
  type = map(object({
    name        = string
    script_path = string
    args        = map(string)
  }))
}

##########################################################################

terraform.tfvars

glue_jobs = {
  job_1 = {
    name        = "glue-job-1"
    script_path = "s3://your-bucket/scripts/job1.py"
    args = {
      "--custom_param" = "value1"
      "--env"          = "dev"
    }
  }
  job_2 = {
    name        = "glue-job-2"
    script_path = "s3://your-bucket/scripts/job2.py"
    args = {
      "--custom_param" = "value2"
      "--env"          = "prod"
    }
  }
  # Repeat up to job_15
}

###############################################################################

resource "aws_glue_job" "jobs" {
  for_each = var.glue_jobs

  name     = each.value.name
  role_arn = aws_iam_role.glue_role.arn

  command {
    name            = "glueetl"
    script_location = each.value.script_path
    python_version  = "3"
  }

  default_arguments = merge({
    "--TempDir"              = "s3://your-temp-dir/"
    "--job-language"         = "python"
    "--enable-metrics"       = "true"
    "--enable-continuous-cloudwatch-log" = "true"
  }, each.value.args)

  glue_version       = "4.0"
  number_of_workers  = 10
  worker_type        = "G.1X"

  execution_property {
    max_concurrent_runs = 1
  }

  tags = {
    Owner       = "Niyaz"
    Environment = each.value.args["--env"]
  }
}

